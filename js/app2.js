const version="0.6",secciones=[],data={},rutas={bandas:"data/bandas.json"},datetimeinicio=new Date("2020-02-07T19:00:00-03:00"),contador=document.querySelector(".cuenta");console.log("Iniciando v0.6"),console.log("¿Querés saber cómo está hecha esta página? Estudiá todo lo que quieras, pariente. Sin frameworks");let sectionels=Array.from(document.getElementsByTagName("section"));sectionels.forEach(e=>secciones.push(e.id)),createBandas();let ubicacion=location.hash.substr(1),saneada=returnSection(ubicacion);if(ubicacion!=saneada)console.log(`Cambiando ${ubicacion} por ${saneada}`),goToRoute(saneada);else if(saneada.indexOf("bandas/")>-1){let e=saneada.split("/")[1];document.getElementById(saneada)||crearPerfil(e)}function returnSection(e){let a=secciones.filter(a=>a==e);return e=a.length>0?e:"inicio"}function goToRoute(e){e=returnSection(e),location.replace(`#${e}`)}async function crearPerfil(e){const a=document.getElementById("tplInnerBanda").content.cloneNode(!0),n=a.querySelector("section"),i=a.querySelector("h3"),t=a.querySelector(".article-principal"),o=a.querySelector(".article-video"),r=a.querySelector(".article-social");n.id=`bandas/${e}`,n.style.backgroundImage=`url(img/bandas/${e}/foto.png)`,i.innerHTML=data.bandas[e].name,i.style.content=`url(img/bandas/${e}/logo.png)`,t.querySelector("h2").innerHTML=data.bandas[e].name;const d=await fetch(`data/${e}/profile.json`).then(e=>e.json());null!=d.social&&d.social.forEach(e=>{const a=document.createElement("a");a.href=e,a.target="_blank",e.indexOf("facebook")>-1?(a.innerHTML='<i class="icon-facebook"></i>Facebook',a.alt="Facebook"):e.indexOf("instagram")>-1?(a.innerHTML='<i class="icon-instagram"></i>Instagram',a.alt="Instagram"):e.indexOf("bandcamp")>-1?(a.innerHTML='<i class="icon-bandcamp"></i>Bandcamp',a.alt="Bandcamp"):e.indexOf("soundclou")>-1?(a.innerHTML='<i class="icon-soundcloud"></i>Soundcloud',a.alt="Soundcloud"):e.indexOf("youtube")>-1?(a.innerHTML='<i class="icon-youtube"></i>YouTube',a.alt="YouTube"):e.indexOf("spoti")>-1?(a.innerHTML='<i class="icon-spotify"></i>Spotify',a.alt="Spotify"):(a.innerHTML='<i class="icon-home"></i>Sitio oficial',a.alt="Sitio oficial"),r.appendChild(a)}),d.description.split("\n").forEach(e=>{const a=document.createElement("p");a.innerHTML=e,t.appendChild(a)});let c=document.createElement("p"),s=new Date(data.bandas[e].event);c.innerHTML=`${data.bandas[e].name} estará tocando en el Carnival Fest Paysandú el día\n    <a href="#programa" alt="Ver actividades"><time datetime="${data.bandas[e].event}">${s.toLocaleString("es-UY",{weekday:"long",day:"numeric"})} a las ${s.toLocaleString("es-UY",{hour:"numeric",minute:"numeric"})}</time></a>\n    ¡No te lo pierdas!`,t.appendChild(c),null!=d.video&&-1==d.video.indexOf("facebook")?o.innerHTML=`<iframe\n        width="560"\n        height="315"\n        src="https://www.youtube-nocookie.com/embed/${d.video}?rel=0"\n        frameborder="0"\n        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"\n        allowfullscreen></iframe>`:o.classList.add("profile-no-video"),document.body.appendChild(a);let l=location.hash;location.hash="#inicio",location.hash=l}async function createBandas(){const e=document.querySelector("#bandas article"),a=document.getElementById("tplBanda"),n=[{id:"aguas",event:"2020-02-07T19:00:00-03:00",name:"Aguas Turbias"},{id:"alpha",event:"2020-02-07T20:00:00-03:00",name:"Alpha"},{id:"anarky",event:"2020-02-07T18:00:00-03:00",name:"Anarky's Child"},{id:"antagonica",event:"2020-02-07T17:00:00-03:00",name:"Antagonica"},{id:"apneuma",event:"2020-02-07T23:00:00-03:00",name:"Apneuma"},{id:"arte",event:"2020-02-09T21:00:00-03:00",name:"Arte Blasfemo"},{id:"b612",event:"2020-02-09T22:00:00-03:00",name:"B612"},{id:"barbarie",event:"2020-02-08T01:00:00-03:00",name:"Barbarie"},{id:"cimarron",event:"2020-02-10T00:00:00-03:00",name:"Cimarron"},{id:"days",event:"2020-02-08T20:00:00-03:00",name:"Days of the Phoenix"},{id:"biodroid",event:"2020-02-09T18:00:00-03:00",name:"Biodroid"},{id:"escoria",event:"2020-02-08T16:00:00-03:00",name:"Escoria"},{id:"eslabon",event:"2020-02-08T18:00:00-03:00",name:"Eslabon"},{id:"espectros",event:"2020-02-08T00:00:00-03:00",name:"Espectros"},{id:"herencia",event:"2020-02-08T17:00:00-03:00",name:"Herencia de Sangre"},{id:"hijos",event:"2020-02-09T16:00:00-03:00",name:"Hijos Bastardos"},{id:"horror",event:"2020-02-08T23:00:00-03:00",name:"Horror on Black Hills"},{id:"mala",event:"2020-02-09T19:00:00-03:00",name:"Mala Influencia"},{id:"maquinaria",event:"2020-02-08T19:00:00-03:00",name:"Maquinaria Pesada"},{id:"parasital",event:"2020-02-08T22:00:00-03:00",name:"Parasital Existence"},{id:"plan",event:"2020-02-09T02:00:00-03:00",name:"Plan Cuatro"},{id:"rr",event:"2020-02-09T17:00:00-03:00",name:"RR 1984"},{id:"ritual",event:"2020-02-09T00:00:00-03:00",name:"Ritual de Nacimiento"},{id:"ropa",event:"2020-02-07T16:00:00-03:00",name:"Ropa Vieja"},{id:"rotten",event:"2020-02-09T20:00:00-03:00",name:"Rotten State"},{id:"ruta",event:"2020-02-09T14:00:00-03:00",name:"Ruta 504"},{id:"serpentor",event:"2020-02-08T02:00:00-03:00",name:"Serpentor"},{id:"sin",event:"2020-02-07T22:00:00-03:00",name:"Sin Principios"},{id:"spiritcraft",event:"2020-02-09T23:00:00-03:00",name:"Spiritcraft"},{id:"tio",event:"2020-02-09T15:00:00-03:00",name:"Tio Toya"},{id:"vida",event:"2020-02-09T01:00:00-03:00",name:"V.I.D.A"},{id:"vademekhum",event:"2020-02-07T21:00:00-03:00",name:"Vademekhum"},{id:"vermiforme",event:"2020-02-08T21:00:00-03:00",name:"Vermiforme"}];data.bandas=n.reduce((e,a)=>(e[a.id]=a,e),{}),n.forEach(n=>{let i=a.content.cloneNode(!0),t=i.querySelector("img");i.querySelector("a").href=`#bandas/${n.id}`,t.src=`img/bandas/${n.id}/logo.png`,t.alt=n.name,e.appendChild(i),secciones.push(`bandas/${n.id}`)})}function updateContador(){let e=new Date(datetimeinicio-Date.now());contador.innerHTML=`faltan <span>${e.toLocaleString("es-UY",{day:"2-digit"})}</span> dias<time>${e.toLocaleString("es-UY",{hour:"numeric",minute:"numeric",second:"numeric"})}</time>`,setTimeout(updateContador,1e3)}window.addEventListener("load",e=>{updateContador()}),window.addEventListener("popstate",e=>{let a=location.hash.substr(1),n=returnSection(a);if(a!=n)console.log(`Cambiando ${a} por ${n}`),goToRoute(n);else if(n.indexOf("bandas/")>-1){let e=n.split("/")[1];document.getElementById(n)||crearPerfil(e)}window.scroll({top:0,left:0,behaviour:"smooth"})});const anvorgesa=document.querySelector(".icon-menu"),menuel=document.querySelector("nav");anvorgesa.addEventListener("click",e=>{menuel.style.display="flex",menuel.addEventListener("click",function e(a){menuel.style.removeProperty("display"),menuel.removeEventListener("click",e)})});